define(function(require){function e(e){$.extend({},i,e)}function t(e,t,a,r){o.$pageContainer=$("#"+e),o.$contentContainer=$("#"+t),o.$showDom=$("[node-type=show]",o.$pageContainer),o.$pageContainer.delegate("[action-type=changePage]","click",function(e){var t=e.currentTarget,s=$(t);i.allPages=parseInt($("[node-type=all]",o.$pageContainer).html(),10),i.page=parseInt(o.$showDom.html(),10);var c=n.json.queryToJson(s.attr("action-data")),l=$.extend({},i,c);"next"===l.action?l.page<l.allPages&&(++l.page,$.ajax({type:"get",url:a,dataType:"json",data:l,success:function(e){o.$showDom.html(l.page),o.$contentContainer.html(e.html),r&&r()}})):"prev"==l.action&&l.page>1&&(--l.page,$.ajax({type:"get",url:a,dataType:"json",data:l,success:function(e){o.$showDom.html(l.page),o.$contentContainer.html(e.html),r&&r()}})),e.stopPropagation(),e.preventDefault()})}var $=require("jquery"),n=require("util"),o=($.browser,{}),i={page:0,allPages:0};return{initialize:t,setParams:e}});