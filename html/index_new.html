<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>首页</title>
<link rel="stylesheet" type="text/css" href="../css/common.css"/>
<link rel="stylesheet" type="text/css" href="../css/ZB_index.css"/>
<style type="text/css">

</style>
</head>
<body class="ZB_index">
	<div class="bg_wrap">
		<div class="main">
			<div class="content clearfix">
				<div class="state">
					<div class="state_bg">
						<div class="state_name" id="state-name">
							<p class="fs51">北美</p>
							<p class="fs24">North <br/>American</p>
						</div>
					</div>
				</div>
				<div class="city_list">
					<!-- 请吊哥通过style控制元素的left值，每一次移动距离是-830px-->
					<div class="city_wrap clearfix" style="left:0">
						<div class="single">
							<ul class="clearfix">
							<li>
								<a href="">
									<span class="city_name">
										<em class="fs30">北美</em>
										<em class="fs12">Tokyo</em>
									</span>
									<span class="bg"></span>
								</a>
							</li>
							<li class="hot">
								<a href="">
									<span class="city_name">
										<em class="fs18">杜塞尔多夫</em>
										<em class="fs12">Tokyo</em>
									</span>
									<span class="bg"></span>
								</a>
							</li>
							<li>
								<a href="">
									<span class="city_name">
										<em class="fs24">亚特兰大</em>
										<em class="fs12">Tokyo Peking Agating</em>
									</span>
									<span class="bg"></span>
								</a>
							</li>
							<li>
								<a href="">
									<span class="city_name">
										<em class="fs30">北美</em>
										<em class="fs12">Tokyo</em>
									</span>
									<span class="bg"></span>
								</a>
							</li>
							<li>
								<a href="">
									<span class="city_name">
										<em class="fs30">北美</em>
										<em class="fs12">Tokyo</em>
									</span>
									<span class="bg"></span>
								</a>
							</li>
							<li>
								<a href="">
									<span class="city_name">
										<em class="fs30">北美</em>
										<em class="fs12">Tokyo</em>
									</span>
									<span class="bg"></span>
								</a>
							</li>
							<li>
								<a href="">
									<span class="city_name">
										<em class="fs30">北美</em>
										<em class="fs12">Tokyo</em>
									</span>
									<span class="bg"></span>
								</a>
							</li>
							<li>
								<a href="">
									<span class="city_name">
										<em class="fs30">北美</em>
										<em class="fs12">Tokyo</em>
									</span>
									<span class="bg"></span>
								</a>
							</li>
							<li>
								<a href="">
									<span class="city_name">
										<em class="fs30">北美</em>
										<em class="fs12">Tokyo</em>
									</span>
									<span class="bg"></span>
								</a>
							</li>
							<li>
								<a href="">
									<span class="city_name">
										<em class="fs30">北美</em>
										<em class="fs12">Tokyo</em>
									</span>
									<span class="bg"></span>
								</a>
							</li>
							<li>
								<a href="">
									<span class="city_name">
										<em class="fs30">北美</em>
										<em class="fs12">Tokyo</em>
									</span>
									<span class="bg"></span>
								</a>
							</li>
							<li>
								<a href="">
									<span class="city_name">
										<em class="fs30">北美</em>
										<em class="fs12">Tokyo</em>
									</span>
									<span class="bg"></span>
								</a>
							</li>
							<li>
								<a href="">
									<span class="city_name">
										<em class="fs30">北美</em>
										<em class="fs12">Tokyo</em>
									</span>
									<span class="bg"></span>
								</a>
							</li>
							<li class="hot">
								<a href="">
									<span class="city_name">
										<em class="fs30">北美</em>
										<em class="fs12">Tokyo</em>
									</span>
									<span class="bg"></span>
								</a>
							</li>
							<li>
								<a href="">
									<span class="city_name">
										<em class="fs30">北美</em>
										<em class="fs12">Tokyo Peking Agating</em>
									</span>
									<span class="bg"></span>
								</a>
							</li>
							<li>
								<a href="">
									<span class="city_name">

										<em class="fs30">东京</em>
										<em class="fs12">Tokyo</em>
									</span>
									<span class="bg"></span>
								</a>
							</li>
							<li>
								<a href="">
									<span class="city_name">

										<em class="fs30">东京</em>

										<em class="fs12">Tokyo</em>
									</span>
									<span class="bg"></span>
								</a>
							</li>
							<li>
								<a href="">
									<span class="city_name">

										<em class="fs30">东京</em>
										<em class="fs12">Tokyo</em>
									</span>
									<span class="bg"></span>
								</a>
							</li>
							</ul>
							<div class="page_turn"><a href="" class="page_down">下一页<span class="page_icon"></span></a></div>
						</div>
						<div class="single">
							<ul class="clearfix">
							<li>
								<a href="">
									<span class="city_name">
										<em class="fs30">亚太</em>
										<em class="fs12">Tokyo</em>
									</span>
									<span class="bg"></span>
								</a>
							</li>
							<li>
								<a href="">
									<span class="city_name">
										<em class="fs30">亚太</em>
										<em class="fs12">Tokyo</em>
									</span>
									<span class="bg"></span>
								</a>
							</li>
							</ul>
							<div class="page_turn"><a href="" class="page_down">下一页<span class="page_icon"></span></a></div>
						</div>
					</div>	
				</div>
			</div>
			<div class="state_tab">
				<a href="" class="">北美 north american</a><span class="v_line">|</span><a href="" class="cur">欧洲 europe</a><span class="v_line">|</span><a href="" class="">亚太 asia pacific</a>
			</div>
			<div class="bottom_tip">ZAIBAI<span>出境购物指南全球百货攻略</span></div>
		</div>
	</div>

<script type="text/javascript" src="../js/Lilac.js"></script>
<script type="text/javascript">
	$.ready(function(){
		var curSelectedState = 0; // 当前选中的州
		var stateName = $('#state-name');
		var cityList = $('#city-list');
		var stateList = $('#state-tab');
	    var stateContainer = stateList[0];
	    var dEvt = $.delegatedEvent(stateContainer);
	    function resetSelected() {
	    	var aList = $.sizzle('a', stateList[0]);
	    	for (var i = 0, len = aList.length; i < len; i++) {
	    		$(aList[i]).removeClassName('cur');
	    	}
	    }

	    function changeState(e) {
	    	var index = parseInt(e.data.index, 10);
	        if (index !== curSelectedState) {
	    		resetSelected();
	    		$(e.el).addClassName('cur');
	    		var p1 = $.sizzle('p', stateName[0])[0];
	    		var p2 = $.sizzle('p', stateName[0])[1];
	    		if (index == 0) {
	    			p1.innerHTML = '北美';
	    			p2.innerHTML = 'North <br/>American';
	    		}
	    		else if (index == 1) {
	    			p1.innerHTML = '欧洲';
	    			p2.innerHTML = 'Europe';
	    		}
	    		else if (index == 2) {
	    			p1.innerHTML = '亚太';
	    			p2.innerHTML = 'Asia';
	    		}
	        	dEvt.remove('change-tab', 'click');
	        	var left = parseInt($(cityList[0]).getStyle('left'), 10);
		        var sub;
		        if (index > curSelectedState) {
		        	sub = -830 * (index - curSelectedState);
		        }
		        else {
		        	sub = 830 * (curSelectedState - index)
		        }
		        curSelectedState = index;
		        $.ani.tween(cityList[0], {
					'duration': 500,
					'end': function() {
						dEvt.add('change-tab', 'click', changeState);
					}
				}).play({
					left: left + sub
				});
	        }
			$.evt.stopEvent();
	    }

	    dEvt.add('change-tab', 'click', changeState);


	    $('#page-down').addEvent('click', function(e) {
	    	var TESTHTML = ''
	    		+     '<li>'
	    		+         '<a href="javascript:void(0);">'
	    		+		      '<span class="city_name">'
	    		+  			      '<em class="fs30">11111</em>'
	    		+  			      '<em class="fs30">111111</em>'
	    		+		      '</span>'
	    		+		      '<span class="bg"></span>'
	    		+         '</a>'
	    		+     '</li>'
	    		+     '<li>'
	    		+         '<a href="javascript:void(0);">'
	    		+		      '<span class="city_name">'
	    		+  			      '<em class="fs30">11111</em>'
	    		+  			      '<em class="fs30">111111</em>'
	    		+		      '</span>'
	    		+		      '<span class="bg"></span>'
	    		+         '</a>'
	    		+     '</li>'
	    		+     '<li>'
	    		+         '<a href="javascript:void(0);">'
	    		+		      '<span class="city_name">'
	    		+  			      '<em class="fs30">11111</em>'
	    		+  			      '<em class="fs30">111111</em>'
	    		+		      '</span>'
	    		+		      '<span class="bg"></span>'
	    		+         '</a>'
	    		+     '</li>'
	    		+     '<li>'
	    		+         '<a href="javascript:void(0);">'
	    		+		      '<span class="city_name">'
	    		+  			      '<em class="fs30">11111</em>'
	    		+  			      '<em class="fs30">111111</em>'
	    		+		      '</span>'
	    		+		      '<span class="bg"></span>'
	    		+         '</a>'
	    		+     '</li>'
	    		+     '<li>'
	    		+         '<a href="javascript:void(0);">'
	    		+		      '<span class="city_name">'
	    		+  			      '<em class="fs30">11111</em>'
	    		+  			      '<em class="fs30">111111</em>'
	    		+		      '</span>'
	    		+		      '<span class="bg"></span>'
	    		+         '</a>'
	    		+     '</li>'
	    		+     '<li>'
	    		+         '<a href="javascript:void(0);">'
	    		+		      '<span class="city_name">'
	    		+  			      '<em class="fs30">11111</em>'
	    		+  			      '<em class="fs30">111111</em>'
	    		+		      '</span>'
	    		+		      '<span class="bg"></span>'
	    		+         '</a>'
	    		+     '</li>'
	    		+     '<li>'
	    		+         '<a href="javascript:void(0);">'
	    		+		      '<span class="city_name">'
	    		+  			      '<em class="fs30">11111</em>'
	    		+  			      '<em class="fs30">111111</em>'
	    		+		      '</span>'
	    		+		      '<span class="bg"></span>'
	    		+         '</a>'
	    		+     '</li>'

	    	var targetState = $.sizzle('ul', cityList[0])[curSelectedState];
	    	$.ani.tween(targetState, {
				'duration': 500,
				'end': function() {
					targetState.innerHTML = TESTHTML;
					$.ani.tween(targetState, {
						'duration': 500,
						'end': function() {
						}
					}).play({
						opacity: 1
					});
				}
			}).play({
				opacity: 0
			});
	    })

	});
</script>
</body>
</html>

